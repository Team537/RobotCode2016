#ifndef SWERVE_HPP
#define SWERVE_HPP

#include "Schematic.hpp"
#include "MyButton.hpp"
#include "SwerveModule.hpp"
#include "Shooter.hpp"

class VisionSource : PIDSource {
public:
	VisionSource() {

	}
};

class VisionOutput : PIDOutput {
private:
	float output;
public:
	VisionOutput() {
		output = 0;
	}

	void PIDWrite (float output) {
		this->output = output;
	}

	float GetOutput() {
		return output;
	}
};

class Swerve {
private:
	Joystick *joystick;
	Gyro* gyro;
	MyButton *tuningButton;
	SwerveModule *frontRight, *frontLeft, *backLeft, *backRight;
	PIDController *visionPID;

public:
	Swerve(Joystick *joystick, Gyro *gyro) {
		this->joystick = joystick;
		this->gyro = gyro;
		this->tuningButton = new MyButton(joystick, 10);

		frontLeft = new SwerveModule("Front Right", 9, 6);
		frontRight = new SwerveModule("Front Left", 8, 3);
		backRight = new SwerveModule("Back Left", 4, 1);
		backLeft = new SwerveModule("Back Right", 5, 2);

		visionPID = new PIDController(0, 0, 0, 0, 20);
		visionPID->SetAbsoluteTolerance(0.05);
		visionPID->SetInputRange(-1, 1);
		visionPID->SetOutputRange(-1, 1);
	}

	void Drive(Shooter *shooter);
	void Tune(SwerveModule *module);
	void Dashboard();
};

#endif
