#include <Shooter/ShooterManager.hpp>

void ShooterManager::Update(bool teleop)
{
	if (activateButton->WasDown())
	{
		activated = !activated;
	}

	if (activated && drive->GetState() != SHOOTER_TELOPERATION)
	{
		drive->ChangeState(SHOOTER_TELOPERATION);
	}

	if (activated && drive->OnTargetAngle())
	{
		activated = false;
	}
}

void ShooterManager::Dashboard()
{
	SmartDashboard::PutBoolean("Shooter Activated", activated);
}

void ShooterManager::Auto()
{
	if (drive->OnTargetAngle())
	{
		Fire();
	}
}

void ShooterManager::Manual()
{
	Fire();
}

void ShooterManager::Fire()
{
	switch (State)
	{
	case 0:
		if (leftPiston->Get() || rightPiston->Get())
		{
			leftPiston->Set(false);
			rightPiston->Set(false);
		}
		State++;
		break;
	case 1:

		break;

	case 2:

		break;
	}
}
