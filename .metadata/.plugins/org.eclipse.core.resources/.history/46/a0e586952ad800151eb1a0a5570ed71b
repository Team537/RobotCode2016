#include <Toolbox/TakeBackHalf.hpp>

void TakeBackHalf::Enable()
{
    timer->Reset();
    timer->Start();
}

void TakeBackHalf::Disable()
{
    timer->Stop();
}

void TakeBackHalf::Update()
{
    float t = GetError() * (1.0f / 360.0f);
    output = t * speed * (timer->Get() * timer->Get());
}

float TakeBackHalf::GetTarget()
{
    return target;
}

void TakeBackHalf::SetTarget(float target)
{
    this->target = target;
}

float TakeBackHalf::GetInput()
{
    return input;
}

void TakeBackHalf::SetInput(float input)
{
    this->input = input;
}

float TakeBackHalf::GetOutput()
{
    Update();
    return output;
}

float TakeBackHalf::GetError()
{
    return input - target;
}
